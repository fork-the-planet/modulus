# SPDX-FileCopyrightText: Copyright (c) 2023 - 2026 NVIDIA CORPORATION & AFFILIATES.
# SPDX-FileCopyrightText: All rights reserved.
# SPDX-License-Identifier: Apache-2.0
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# Car body-in-white crash experiment using GeoTransolver (one-shot).
# Usage: python train.py --config-name=experiment_crash_transolver
#
# To switch model (same dataset, different model):
#   python train.py --config-name=experiment_crash_transolver model=transolver_time_conditional

hydra:
  job:
    chdir: True
  run:
    dir: ./outputs/

experiment_name: "Car-Crash-GeoTransolver"
experiment_desc: "Car body-in-white crash experiment using GeoTransolver"
run_desc: "Car body-in-white crash experiment using GeoTransolver"

defaults:
  - reader: vtp
  - datapipe: point_cloud
  - model: geotransolver_one_shot_training
  - training: default
  - inference: default
  - _self_

# ┌───────────────────────────────────────────┐
# │                   Data                    │
# └───────────────────────────────────────────┘

training:
  raw_data_dir: ???              # set in config or via CLI: training.raw_data_dir=/path/to/train
  raw_data_dir_validation: ???   # set in config or via CLI: training.raw_data_dir_validation=/path/to/validation
  global_features_filepath: null # no per-run global scalars for this dataset

  # ┌───────────────────────────────────────────┐
  # │                 Dataset                   │
  # └───────────────────────────────────────────┘

  num_time_steps: 26
  num_training_samples: 136
  num_validation_samples: 15

inference:
  raw_data_dir_test: ???         # set in config or via CLI: inference.raw_data_dir_test=/path/to/test

# ┌───────────────────────────────────────────┐
# │            Datapipe features              │
# └───────────────────────────────────────────┘

datapipe:
  static_features:
    - thickness     # per-node thickness read from the VTP/d3plot files
  dynamic_targets: []   # position-only targets; no extra per-node time series
  global_features: null

# ┌───────────────────────────────────────────┐
# │            Model overrides                 │
# └───────────────────────────────────────────┘

model:
  functional_dim: 4   # coords (3) + thickness (1)
  out_dim: 75        # (num_time_steps - 1) * 3 = 25 * 3
  global_dim: null    # no global features for this dataset
